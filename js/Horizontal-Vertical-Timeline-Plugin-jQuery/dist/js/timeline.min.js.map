{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","warningLabel","winWidth","window","innerWidth","resizeTimer","forceVerticalMode","type","defaultValue","acceptedValues","moveItems","verticalTrigger","itemWrap","el","wrapper","classes","classList","add","parentNode","insertBefore","appendChild","isElementInViewport","triggerPosition","rect","getBoundingClientRect","windowHeight","innerHeight","document","documentElement","clientHeight","defaultTrigger","defaultSettings","match","triggerUnit","value","console","triggerValue","warn","trigger","parseInt","left","clientWidth","tl","timelineEl","querySelector","topPosition","items","currentIndex","offsetLeft","scroller","horizontalDivider","createElement","className","str","style","setUpHorinzontalTimeline","itemWidth","navArrows","position","arrowPrev","disabled","item","settings","wrap","offsetWidth","visibleItems","forEach","length","scrollerWidth","width","height","evenIndexTallest","oddIndexTallest","i","offsetHeight","horizontalStartPosition","transform","timelinePosition","prevArrow","setWidths","setHeights","nextArrow","textContent","top","addNavigation","remove","addHorizontalDivider","querySelectorAll","webkitTransform","msTransform","call","arrow","addEventListener","e","preventDefault","this","contains","arrowNext","maxIndex","removeAttribute","opacity","resetTimelines","setUpTimelines","setHeightandWidths","lastVisibleIndex","setUpVerticalTimeline","verticalStartPosition","push","timelineName","id","errorPart","data","createTimelines","Error","slice","children","message","Object","keys","key","settingName","testValues","indexOf","triggerArray","_triggerArray","_slicedToArray","triggerValid","_defaultTrigger2","unit","setTimeout","newWinWidth","jQuery"],"mappings":"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","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  const warningLabel = 'Timeline:';\r\n  let winWidth = window.innerWidth;\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    forceVerticalMode: {\r\n      type: 'integer',\r\n      defaultValue: 600\r\n    },\r\n    horizontalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['bottom', 'top'],\r\n      defaultValue: 'top'\r\n    },\r\n    mode: {\r\n      type: 'string',\r\n      acceptedValues: ['horizontal', 'vertical'],\r\n      defaultValue: 'vertical'\r\n    },\r\n    moveItems: {\r\n      type: 'integer',\r\n      defaultValue: 1\r\n    },\r\n    verticalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['left', 'right'],\r\n      defaultValue: 'left'\r\n    },\r\n    verticalTrigger: {\r\n      type: 'string',\r\n      defaultValue: '15%'\r\n    },\r\n    visibleItems: {\r\n      type: 'integer',\r\n      defaultValue: 3\r\n    }\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} The value \"${value}\" entered for the setting \"${settingName}\" is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to wrap each element in a group with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach((item) => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is partially in the viewport\r\n  function isElementInViewport(el, triggerPosition) {\r\n    const rect = el.getBoundingClientRect();\r\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let triggerUnit = triggerPosition.unit;\r\n    let triggerValue = triggerPosition.value;\r\n    let trigger = windowHeight;\r\n    if (triggerUnit === 'px' && triggerValue >= windowHeight) {\r\n      console.warn('The value entered for the setting \"verticalTrigger\" is larger than the window height. The default value will be used instead.');\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n    if (triggerUnit === 'px') {\r\n      trigger = parseInt(trigger - triggerValue, 10);\r\n    } else if (triggerUnit === '%') {\r\n      trigger = parseInt(trigger * ((100 - triggerValue) / 100), 10);\r\n    }\r\n    return (\r\n      rect.top <= trigger &&\r\n      rect.left <= (window.innerWidth || document.documentElement.clientWidth) &&\r\n      (rect.top + rect.height) >= 0 &&\r\n      (rect.left + rect.width) >= 0\r\n    );\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    const settings = {};\r\n\r\n    // Test for correct HTML structure\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel} .timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel} .timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    // Test setting input values\r\n    Object.keys(defaultSettings).forEach((key) => {\r\n      settings[key] = defaultSettings[key].defaultValue;\r\n\r\n      if (data[key]) {\r\n        settings[key] = data[key];\r\n      } else if (options && options[key]) {\r\n        settings[key] = options[key];\r\n      }\r\n\r\n      if (defaultSettings[key].type === 'integer') {\r\n        if (!settings[key] || !testValues(settings[key], key)) {\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      } else if (defaultSettings[key].type === 'string') {\r\n        if (defaultSettings[key].acceptedValues && defaultSettings[key].acceptedValues.indexOf(settings[key]) === -1) {\r\n          console.warn(`${warningLabel} The value \"${settings[key]}\" entered for the setting \"${key}\" was not recognised.`);\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Further specific testing of input values\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    const triggerArray = settings.verticalTrigger.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let [, triggerValue, triggerUnit] = triggerArray;\r\n    let triggerValid = true;\r\n    if (!triggerValue) {\r\n      console.warn(`${warningLabel} No numercial value entered for the 'verticalTrigger' setting.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit !== 'px' && triggerUnit !== '%') {\r\n      console.warn(`${warningLabel} The setting 'verticalTrigger' must be a percentage or pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit === '%' && (triggerValue > 100 || triggerValue < 0)) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be between 0 and 100 if using a percentage value.`);\r\n      triggerValid = false;\r\n    } else if (triggerUnit === 'px' && triggerValue < 0) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be above 0 if using a pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n\r\n    if (triggerValid === false) {\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n\r\n    settings.verticalTrigger = {\r\n      unit: triggerUnit,\r\n      value: triggerValue\r\n    };\r\n\r\n    if (settings.moveItems > settings.visibleItems) {\r\n      console.warn(`${warningLabel} The value of \"moveItems\" (${settings.moveItems}) is larger than the number of \"visibleItems\" (${settings.visibleItems}). The value of \"visibleItems\" has been used instead.`);\r\n      settings.moveItems = settings.visibleItems;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      items,\r\n      settings\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.settings.visibleItems;\r\n      tl.items.forEach((item) => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition === 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition !== 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.settings.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.settings.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add the centre line to the horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    if (tl.timelineEl.querySelector('.timeline-divider')) {\r\n      tl.timelineEl.querySelector('.timeline-divider').remove();\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    tl.scroller.style.webkitTransform = str;\r\n    tl.scroller.style.msTransform = str;\r\n    tl.scroller.style.transform = str;\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.settings.visibleItems;\r\n    const moveItems = parseInt(tl.settings.moveItems, 10);\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += moveItems) : (currentIndex -= moveItems);\r\n        if (currentIndex === 0 || currentIndex < 0) {\r\n          currentIndex = 0;\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex || currentIndex > maxIndex) {\r\n          currentIndex = maxIndex;\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item, tl.settings.verticalTrigger) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.settings.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach((item) => {\r\n        if (isElementInViewport(item, tl.settings.verticalTrigger)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    currentIndex = 0;\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach((item) => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach((tl) => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.settings.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.settings.mode === 'horizontal' && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(() => {\r\n      const newWinWidth = window.innerWidth;\r\n      if (newWinWidth !== winWidth) {\r\n        setUpTimelines();\r\n        winWidth = newWinWidth;\r\n      }\r\n    }, 250);\r\n  });\r\n}\r\n\r\n// Register as a jQuery plugin if the jQuery library is present\r\nif (window.jQuery) {\r\n  (($) => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}